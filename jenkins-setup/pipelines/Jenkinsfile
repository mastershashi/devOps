pipeline {
  agent any

  environment {
    DOCKER_IMAGE = "yourdockerhubuser/yourapp"
    DOCKER_TAG = "latest"
  }

  stages {
    stage('Build') {
      steps {
        echo "âœ… Building the app..."
        // build your app here
      }
    }

    stage('Test') {
      steps {
        echo "ğŸ§ª Running tests..."
        // run tests here
      }
    }

    stage('Docker Build') {
      steps {
        script {
          echo "ğŸ³ Building Docker image..."
          sh "docker build -t $DOCKER_IMAGE:$DOCKER_TAG ."
        }
      }
    }

    stage('Push to Docker Hub') {
      steps {
        withCredentials([usernamePassword(credentialsId: 'dockerhub-creds', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
          sh """
            echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
            docker push $DOCKER_IMAGE:$DOCKER_TAG
          """
        }
      }
    }

    stage('Deploy to Dev/Staging') {
      steps {
        echo "ğŸš€ Deploying to staging environment..."
        // deployment script/command
      }
    }

    stage('Approval & Deploy to EU10') {
      steps {
        input message: "Deploy to EU10?", ok: "Deploy"
        echo "ğŸš€ Deploying to EU10..."
      }
    }

    stage('Approval & Deploy to EU20') {
      steps {
        input message: "Deploy to EU20?", ok: "Deploy"
        echo "ğŸš€ Deploying to EU20..."
      }
    }

    stage('Approval & Deploy to US10') {
      steps {
        input message: "Deploy to US10?", ok: "Deploy"
        echo "ğŸš€ Deploying to US10..."
      }
    }

    stage('Approval & Deploy to US20') {
      steps {
        input message: "Deploy to US20?", ok: "Deploy"
        echo "ğŸš€ Deploying to US20..."
      }
    }
  }
}
